<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GlobalX News - AI Video Generator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #CC0000;
            --primary-dark: #A30000;
            --dark-bg: #1c1c1e;
            --light-bg: #f0f2f5;
            --white: #ffffff;
            --grey: #6c757d;
            --transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', 'Roboto', 'Helvetica Neue', sans-serif;
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #1a2a6c);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            color: #333;
            padding: 20px;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .app-container {
            width: 100%;
            max-width: 420px;
            background-color: var(--white);
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            position: relative;
            border: 1px solid rgba(255, 255, 255, 0.2);
            height: 90vh;
            max-height: 800px;
        }

        .header {
            background: linear-gradient(45deg, var(--primary-color), var(--primary-dark));
            color: white;
            padding: 20px;
            text-align: center;
            position: relative;
            z-index: 10;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .header::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 0;
            width: 100%;
            height: 20px;
            background: linear-gradient(to bottom, rgba(204,0,0,0.3), transparent);
            z-index: -1;
        }
        
        .header h1 {
            margin: 0;
            font-size: 1.8rem;
            font-weight: 800;
            letter-spacing: 1px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        .header .logo-x {
            font-style: italic;
            color: #FFD700;
            font-size: 1.1em;
            display: inline-block;
            transform: rotate(-5deg);
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }
        
        .header .subtitle {
            font-size: 0.9rem;
            opacity: 0.9;
            margin-top: 5px;
            font-weight: 300;
            letter-spacing: 0.5px;
        }

        .main-content {
            flex-grow: 1;
            padding: 25px;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
            background: url('https://www.transparenttextures.com/patterns/carbon-fibre.png');
            position: relative;
        }

        .workflow-step {
            display: none;
            flex-direction: column;
            animation: fadeIn 0.5s ease-out;
            height: 100%;
        }
        
        .workflow-step.active { 
            display: flex; 
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h2 {
            font-size: 1.6rem;
            color: var(--dark-bg);
            margin: 0 0 15px 0;
            padding-bottom: 12px;
            border-bottom: 3px solid var(--primary-color);
            position: relative;
        }
        
        h2::after {
            content: '';
            position: absolute;
            bottom: -3px;
            left: 0;
            width: 80px;
            height: 3px;
            background: var(--primary-dark);
        }

        p.step-description {
            font-size: 1rem;
            color: #555;
            margin-bottom: 25px;
            line-height: 1.6;
            background: rgba(240, 242, 245, 0.6);
            padding: 15px;
            border-radius: 10px;
            border-left: 3px solid var(--primary-color);
        }

        /* Form & Interactive Elements */
        textarea {
            width: 100%;
            height: 200px;
            border-radius: 12px;
            border: 1px solid #ddd;
            padding: 15px;
            font-size: 1rem;
            resize: none;
            transition: var(--transition);
            font-family: inherit;
            background: rgba(255, 255, 255, 0.9);
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.05);
        }
        
        textarea:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(204,0,0,0.2);
            outline: none;
        }
        
        textarea::placeholder {
            color: #999;
            font-style: italic;
        }

        .anchor-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 20px;
            margin-top: 10px;
        }
        
        .anchor-avatar {
            cursor: pointer;
            position: relative;
            transition: var(--transition);
            transform-origin: center;
        }
        
        .anchor-avatar:hover {
            transform: scale(1.05);
        }
        
        .anchor-avatar img {
            width: 100%;
            height: auto;
            display: block;
            border-radius: 50%;
            border: 4px solid transparent;
            transition: var(--transition);
            aspect-ratio: 1/1;
            object-fit: cover;
        }
        
        .anchor-avatar.selected img {
            border-color: var(--primary-color);
            box-shadow: 0 0 20px rgba(204,0,0,0.4);
            transform: scale(1.05);
        }
        
        .anchor-avatar .checkmark {
            display: none;
            position: absolute;
            bottom: 5px;
            right: 5px;
            width: 25px;
            height: 25px;
            background-color: var(--primary-color);
            color: white;
            border-radius: 50%;
            font-size: 14px;
            font-weight: bold;
            text-align: center;
            line-height: 25px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
        }
        
        .anchor-avatar.selected .checkmark {
            display: block;
            animation: popIn 0.3s ease-out;
        }
        
        @keyframes popIn {
            0% { transform: scale(0); }
            70% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
        
        .anchor-avatar p {
            text-align: center;
            margin: 10px 0 0 0;
            font-weight: 600;
            font-size: 0.9rem;
            color: #444;
        }

        .upload-area {
            border: 3px dashed #ccc;
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            background-color: rgba(250, 250, 250, 0.8);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }
        
        .upload-area:hover {
            background-color: #e9e9e9;
            border-color: var(--primary-dark);
        }
        
        .upload-area i {
            font-size: 2.5rem;
            color: var(--primary-color);
            margin-bottom: 15px;
            display: block;
        }
        
        .upload-area span { 
            display: block; 
            font-weight: 600; 
            font-size: 1.1rem; 
            color: #555; 
        }
        
        .upload-area small {
            display: block;
            margin-top: 10px;
            font-size: 0.85rem;
            color: #777;
        }
        
        #media-preview {
            margin-top: 20px;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(90px, 1fr));
            gap: 12px;
        }
        
        .preview-item {
            width: 100%;
            height: 90px;
            object-fit: cover;
            border-radius: 10px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.1);
            transition: var(--transition);
            cursor: pointer;
            border: 2px solid transparent;
        }
        
        .preview-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        /* Generation Screen */
        .generation-screen {
            background-color: var(--dark-bg);
            color: #fff;
            padding: 20px;
            border-radius: 15px;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.5);
            position: relative;
            overflow: hidden;
        }
        
        .generation-screen::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, transparent 0%, rgba(0,0,0,0.7) 100%);
            z-index: 1;
        }
        
        .loading-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            z-index: 2;
        }
        
        .loading-spinner {
            border: 5px solid rgba(255,255,255,0.1);
            border-top: 5px solid var(--primary-color);
            border-radius: 50%;
            width: 70px;
            height: 70px;
            animation: spin 1s linear infinite;
            position: relative;
            box-shadow: 0 0 20px rgba(204,0,0,0.3);
        }
        
        .loading-spinner::after {
            content: '';
            position: absolute;
            top: -8px;
            left: -8px;
            right: -8px;
            bottom: -8px;
            border: 3px solid rgba(204,0,0,0.1);
            border-radius: 50%;
        }
        
        @keyframes spin { 
            100% { transform: rotate(360deg); }
        }

        #loading-text {
            margin-top: 25px;
            font-size: 1.2rem;
            color: #eee;
            min-height: 30px;
            text-align: center;
            max-width: 90%;
            line-height: 1.5;
            text-shadow: 0 1px 3px rgba(0,0,0,0.5);
        }
        
        .progress-bar {
            width: 100%;
            max-width: 300px;
            height: 8px;
            background: rgba(255,255,255,0.1);
            border-radius: 4px;
            margin-top: 20px;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            width: 0%;
            background: linear-gradient(to right, var(--primary-color), var(--primary-dark));
            border-radius: 4px;
            transition: width 0.5s ease;
        }
        
        #final-video-container {
            display: none;
            width: 100%;
            height: 100%;
            position: relative;
            background-size: cover;
            background-position: center;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 0 30px rgba(0,0,0,0.6);
            z-index: 2;
        }
        
        .video-overlay {
            position: absolute;
            top: 0; 
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to top, rgba(0,0,0,0.85) 0%, rgba(0,0,0,0.4) 30%, transparent 60%);
            z-index: 1;
        }
        
        .video-anchor {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 70%;
            max-width: 220px;
            height: auto;
            z-index: 2;
            filter: drop-shadow(0 -10px 20px rgba(0,0,0,0.6));
        }
        
        .video-lower-third {
            background: linear-gradient(to right, rgba(204, 0, 0, 0.9), rgba(163, 0, 0, 0.9));
            color: white;
            padding: 12px 20px;
            position: absolute;
            bottom: 45px;
            left: 0;
            width: 100%;
            z-index: 3;
            line-height: 1.4;
            font-family: 'Georgia', serif;
            box-shadow: 0 -5px 15px rgba(0,0,0,0.3);
        }
        
        .video-lower-third strong {
            font-size: 1.3rem;
            font-weight: 700;
            letter-spacing: 0.5px;
            display: block;
            text-shadow: 0 1px 3px rgba(0,0,0,0.5);
        }
        
        .video-ticker {
            background-color: rgba(0, 0, 0, 0.92);
            color: white;
            padding: 10px 0;
            white-space: nowrap;
            overflow: hidden;
            position: absolute;
            bottom: 0;
            width: 100%;
            z-index: 4;
            border-top: 2px solid var(--primary-color);
        }
        
        .ticker-text {
            display: inline-block;
            padding-left: 100%;
            animation: ticker-scroll 30s linear infinite;
            font-size: 1.1rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        @keyframes ticker-scroll {
            0%   { transform: translateX(0); }
            100% { transform: translateX(-150%); }
        }
        
        .globalx-logo {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.5rem;
            font-weight: 800;
            color: rgba(255,255,255,0.9);
            z-index: 3;
        }
        
        .globalx-logo span {
            color: #FFD700;
            font-style: italic;
        }

        /* Footer Navigation */
        .footer {
            padding: 18px 25px;
            border-top: 1px solid #e0e0e0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #f8f8f8;
            z-index: 10;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.05);
        }
        
        .nav-button {
            background: linear-gradient(to bottom, var(--primary-color), var(--primary-dark));
            color: white;
            border: none;
            padding: 14px 32px;
            border-radius: 30px;
            font-size: 1.05rem;
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
            letter-spacing: 0.5px;
            text-shadow: 0 1px 2px rgba(0,0,0,0.3);
            box-shadow: 0 4px 15px rgba(204,0,0,0.3);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .nav-button:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(204,0,0,0.4);
        }
        
        .nav-button:active:not(:disabled) {
            transform: translateY(-1px);
        }
        
        .nav-button:disabled {
            background: #ccc;
            cursor: not-allowed;
            box-shadow: none;
        }
        
        .nav-button.back {
            background: linear-gradient(to bottom, var(--grey), #5a6268);
            box-shadow: 0 4px 15px rgba(108, 117, 125, 0.3);
        }
        
        .nav-button.back:hover:not(:disabled) {
            box-shadow: 0 6px 20px rgba(108, 117, 125, 0.4);
        }
        
        .step-indicator {
            font-size: 0.9rem;
            color: var(--grey);
            font-weight: 600;
            margin: 0 10px;
        }

        /* Responsive adjustments */
        @media (max-width: 480px) {
            .app-container {
                height: 95vh;
                max-height: 820px;
            }
            
            .main-content {
                padding: 20px;
            }
            
            .anchor-grid {
                grid-template-columns: repeat(auto-fill, minmax(85px, 1fr));
                gap: 15px;
            }
            
            .nav-button {
                padding: 12px 25px;
                font-size: 1rem;
            }
        }
        
        @media (max-width: 380px) {
            .header h1 {
                font-size: 1.5rem;
            }
            
            h2 {
                font-size: 1.4rem;
            }
            
            .anchor-grid {
                grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
                gap: 12px;
            }
            
            .nav-button {
                padding: 10px 20px;
            }
        }
        
        /* Success animation */
        @keyframes successPulse {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(76, 175, 80, 0.7); }
            70% { transform: scale(1.05); box-shadow: 0 0 0 15px rgba(76, 175, 80, 0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(76, 175, 80, 0); }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <div class="header">
            <h1>Global<span class="logo-x">X</span> News</h1>
            <div class="subtitle">AI-Powered News Broadcast Generator</div>
        </div>

        <div class="main-content">
            <div id="step-1" class="workflow-step active">
                <h2>Step 1: Write Your Script</h2>
                <p class="step-description">Enter the news story below. Our advanced AI will analyze the content to create your professional broadcast.</p>
                <textarea id="news-script" placeholder="e.g., 'Good evening. Today, tech giant OmniCorp unveiled its latest breakthrough in artificial intelligence, promising to revolutionize data processing across industries. The new neural network architecture, called Cerebrum-X, can process complex datasets 100x faster than current systems...'">Good evening. Today, tech giant OmniCorp unveiled its latest breakthrough in artificial intelligence, promising to revolutionize data processing across industries. The new neural network architecture, called Cerebrum-X, can process complex datasets 100x faster than current systems. CEO Alexandra Reed stated, "This represents a quantum leap in computational efficiency that will transform everything from medical research to climate modeling." The announcement comes amid growing global investment in AI technologies, with projections indicating the market will reach $1.5 trillion by 2030. Industry analysts predict Cerebrum-X could give OmniCorp a significant advantage in the competitive AI landscape.</textarea>
            </div>

            <div id="step-2" class="workflow-step">
                <h2>Step 2: Choose Your AI Anchor</h2>
                <p class="step-description">Select from our diverse library of hyper-realistic AI news anchors. Each avatar features unique vocal patterns and delivery styles.</p>
                <div class="anchor-grid">
                    <div class="anchor-avatar" data-id="ava">
                        <img src="https://images.unsplash.com/photo-1580489944761-15a19d654956?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=200&q=80" alt="Ava">
                        <div class="checkmark">✓</div>
                        <p>Ava</p>
                    </div>
                    <div class="anchor-avatar" data-id="david">
                        <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=200&q=80" alt="David">
                        <div class="checkmark">✓</div>
                        <p>David</p>
                    </div>
                    <div class="anchor-avatar" data-id="priya">
                        <img src="https://images.unsplash.com/photo-1611689103472-5b7d3c9c32e1?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=200&q=80" alt="Priya">
                        <div class="checkmark">✓</div>
                        <p>Priya</p>
                    </div>
                    <div class="anchor-avatar" data-id="kenji">
                        <img src="https://images.unsplash.com/photo-1552058544-f2b08422138a?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=200&q=80" alt="Kenji">
                        <div class="checkmark">✓</div>
                        <p>Kenji</p>
                    </div>
                    <div class="anchor-avatar" data-id="sofia">
                        <img src="https://images.unsplash.com/photo-1567532939604-b6b5b0e16019?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=200&q=80" alt="Sofia">
                        <div class="checkmark">✓</div>
                        <p>Sofia</p>
                    </div>
                    <div class="anchor-avatar" data-id="marcus">
                        <img src="https://images.unsplash.com/photo-1564564321837-a57b7070ac4f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=200&q=80" alt="Marcus">
                        <div class="checkmark">✓</div>
                        <p>Marcus</p>
                    </div>
                </div>
            </div>

            <div id="step-3" class="workflow-step">
                <h2>Step 3: Upload Media (B-Roll)</h2>
                <p class="step-description">Add photos and videos. The AI will intelligently incorporate these visuals as background content in your report.</p>
                <label for="media-upload-input" class="upload-area">
                    <i class="fas fa-cloud-upload-alt"></i>
                    <span>Click or Drop Files Here</span>
                    <small>Supports JPG, PNG, MP4 (max 10 files)</small>
                </label>
                <input type="file" id="media-upload-input" multiple accept="image/*,video/*" style="display: none;">
                <div id="media-preview"></div>
            </div>

            <div id="step-4" class="workflow-step">
                <h2>Step 4: Generate Your Broadcast</h2>
                <p class="step-description">Sit back while our advanced AI engine constructs your professional news segment.</p>
                <div class="generation-screen">
                    <div id="loading-container" class="loading-container">
                        <div class="loading-spinner"></div>
                        <p id="loading-text">Initializing AI engine...</p>
                        <div class="progress-bar">
                            <div class="progress" id="progress-bar"></div>
                        </div>
                    </div>
                    <div id="final-video-container">
                        <div class="video-overlay"></div>
                        <div class="globalx-logo">Global<span>X</span></div>
                        <div class="video-lower-third">
                            <strong id="anchor-name-display">Priya Sharma</strong>
                            <span id="report-title-display">Senior Technology Correspondent</span>
                        </div>
                        <div class="video-ticker">
                            <span class="ticker-text" id="ticker-text-display">BREAKING: OmniCorp unveils revolutionary AI system • Cerebrum-X promises 100x speed boost • CEO Alexandra Reed announces breakthrough • Global AI market projected to hit $1.5T by 2030 • Experts predict industry transformation • Live from GlobalX News Headquarters</span>
                        </div>
                        <img src="https://images.unsplash.com/photo-1611689103472-5b7d3c9c32e1?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=300&q=80" alt="AI Anchor" class="video-anchor" id="final-anchor-img">
                    </div>
                </div>
            </div>
        </div>

        <div class="footer">
            <button id="back-btn" class="nav-button back">
                <i class="fas fa-arrow-left"></i> Back
            </button>
            <div class="step-indicator" id="step-indicator">Step 1 of 4</div>
            <button id="next-btn" class="nav-button">
                Next <i class="fas fa-arrow-right"></i>
            </button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- STATE MANAGEMENT ---
            const appState = {
                currentStep: 1,
                totalSteps: 4,
                script: '',
                selectedAnchor: {
                    id: 'priya',
                    name: 'Priya Sharma',
                    src: 'https://images.unsplash.com/photo-1611689103472-5b7d3c9c32e1?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=300&q=80'
                },
                mediaFiles: [
                    'https://images.unsplash.com/photo-1677442135722-5fba49c069f1?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80',
                    'https://images.unsplash.com/photo-1677442135133-33d364e7d1b3?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80',
                    'https://images.unsplash.com/photo-1679419704050-57827a5d1ea2?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80'
                ],
                generationInterval: null,
                brollInterval: null
            };

            // --- DOM ELEMENTS ---
            const dom = {
                steps: document.querySelectorAll('.workflow-step'),
                nextBtn: document.getElementById('next-btn'),
                backBtn: document.getElementById('back-btn'),
                newsScript: document.getElementById('news-script'),
                anchorGrid: document.querySelector('.anchor-grid'),
                mediaUploadInput: document.getElementById('media-upload-input'),
                mediaPreview: document.getElementById('media-preview'),
                finalVideoContainer: document.getElementById('final-video-container'),
                loadingContainer: document.getElementById('loading-container'),
                loadingText: document.getElementById('loading-text'),
                progressBar: document.getElementById('progress-bar'),
                stepIndicator: document.getElementById('step-indicator')
            };

            // --- ANCHOR DATA ---
            const ANCHORS = [
                { id: 'ava', name: 'Ava Johnson', src: 'https://images.unsplash.com/photo-1580489944761-15a19d654956?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=300&q=80' },
                { id: 'david', name: 'David Chen', src: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=300&q=80' },
                { id: 'priya', name: 'Priya Sharma', src: 'https://images.unsplash.com/photo-1611689103472-5b7d3c9c32e1?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=300&q=80' },
                { id: 'kenji', name: 'Kenji Tanaka', src: 'https://images.unsplash.com/photo-1552058544-f2b08422138a?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=300&q=80' },
                { id: 'sofia', name: 'Sofia Rossi', src: 'https://images.unsplash.com/photo-1567532939604-b6b5b0e16019?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=300&q=80' },
                { id: 'marcus', name: 'Marcus Wright', src: 'https://images.unsplash.com/photo-1564564321837-a57b7070ac4f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=300&q=80' },
            ];

            // --- INITIALIZATION ---
            function init() {
                setupEventListeners();
                updateUI();
                preSelectAnchor();
                renderMediaPreviews();
            }

            function preSelectAnchor() {
                const anchorElement = document.querySelector(`.anchor-avatar[data-id="${appState.selectedAnchor.id}"]`);
                if (anchorElement) {
                    anchorElement.classList.add('selected');
                }
            }

            function renderMediaPreviews() {
                dom.mediaPreview.innerHTML = '';
                appState.mediaFiles.forEach(file => {
                    const img = document.createElement('img');
                    img.src = file;
                    img.className = 'preview-item';
                    dom.mediaPreview.appendChild(img);
                });
            }

            function setupEventListeners() {
                dom.nextBtn.addEventListener('click', handleNext);
                dom.backBtn.addEventListener('click', handleBack);
                
                dom.anchorGrid.addEventListener('click', e => {
                    const avatar = e.target.closest('.anchor-avatar');
                    if (avatar) {
                        const anchorId = avatar.dataset.id;
                        const anchor = ANCHORS.find(a => a.id === anchorId);
                        if (anchor) {
                            appState.selectedAnchor = anchor;
                            document.querySelectorAll('.anchor-avatar').forEach(a => a.classList.remove('selected'));
                            avatar.classList.add('selected');
                        }
                    }
                });
                
                dom.mediaUploadInput.addEventListener('change', handleMediaUpload);
                
                // Click on upload area to trigger file input
                document.querySelector('.upload-area').addEventListener('click', () => {
                    dom.mediaUploadInput.click();
                });
            }

            // --- UI & WORKFLOW LOGIC ---
            function updateUI() {
                // Update step visibility
                dom.steps.forEach(step => step.classList.remove('active'));
                document.getElementById(`step-${appState.currentStep}`).classList.add('active');

                // Update button visibility and text
                dom.backBtn.style.display = appState.currentStep > 1 ? 'flex' : 'none';
                dom.nextBtn.style.display = appState.currentStep === appState.totalSteps ? 'none' : 'flex';
                
                if (appState.currentStep === appState.totalSteps - 1) {
                    dom.nextBtn.innerHTML = `Generate <i class="fas fa-bolt"></i>`;
                } else {
                    dom.nextBtn.innerHTML = `Next <i class="fas fa-arrow-right"></i>`;
                }

                if (appState.currentStep === appState.totalSteps) {
                    dom.backBtn.innerHTML = `<i class="fas fa-redo"></i> Start Over`;
                } else {
                    dom.backBtn.innerHTML = `<i class="fas fa-arrow-left"></i> Back`;
                }
                
                // Update step indicator
                dom.stepIndicator.textContent = `Step ${appState.currentStep} of ${appState.totalSteps}`;
            }

            function handleNext() {
                if (!validateStep()) return;
                
                // Move to next step
                appState.currentStep++;
                
                if (appState.currentStep === appState.totalSteps) {
                    runGeneration();
                }
                
                updateUI();
            }

            function handleBack() {
                if (appState.currentStep === appState.totalSteps) {
                    resetApp();
                    return;
                }
                
                appState.currentStep--;
                updateUI();
            }

            function resetApp() {
                clearInterval(appState.generationInterval);
                clearInterval(appState.brollInterval);
                appState.currentStep = 1;
                appState.script = '';
                appState.selectedAnchor = ANCHORS[2]; // Reset to Priya
                appState.mediaFiles = [
                    'https://images.unsplash.com/photo-1677442135722-5fba49c069f1?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80',
                    'https://images.unsplash.com/photo-1677442135133-33d364e7d1b3?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80',
                    'https://images.unsplash.com/photo-1679419704050-57827a5d1ea2?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80'
                ];
                
                dom.newsScript.value = 'Good evening. Today, tech giant OmniCorp unveiled its latest breakthrough in artificial intelligence, promising to revolutionize data processing across industries. The new neural network architecture, called Cerebrum-X, can process complex datasets 100x faster than current systems. CEO Alexandra Reed stated, "This represents a quantum leap in computational efficiency that will transform everything from medical research to climate modeling." The announcement comes amid growing global investment in AI technologies, with projections indicating the market will reach $1.5 trillion by 2030. Industry analysts predict Cerebrum-X could give OmniCorp a significant advantage in the competitive AI landscape.';
                dom.mediaPreview.innerHTML = '';
                document.querySelectorAll('.anchor-avatar').forEach(a => a.classList.remove('selected'));
                preSelectAnchor();
                renderMediaPreviews();
                dom.finalVideoContainer.style.display = 'none';
                dom.loadingContainer.style.display = 'flex';
                dom.progressBar.style.width = '0%';

                updateUI();
            }

            function validateStep() {
                if (appState.currentStep === 1) {
                    appState.script = dom.newsScript.value;
                    if (appState.script.trim().length < 25) {
                        showError('Please enter a more detailed script (at least 25 characters).');
                        return false;
                    }
                }
                
                if (appState.currentStep === 2) {
                    if (!appState.selectedAnchor) {
                        showError('Please select your AI anchor.');
                        return false;
                    }
                }
                
                return true;
            }
            
            function showError(message) {
                const errorEl = document.createElement('div');
                errorEl.className = 'error-message';
                errorEl.textContent = message;
                errorEl.style.cssText = `
                    position: fixed;
                    top: 20px;
                    left: 50%;
                    transform: translateX(-50%);
                    background: #ff4444;
                    color: white;
                    padding: 15px 25px;
                    border-radius: 8px;
                    z-index: 1000;
                    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
                    animation: fadeIn 0.3s ease-out;
                `;
                
                document.body.appendChild(errorEl);
                
                setTimeout(() => {
                    errorEl.style.opacity = '0';
                    setTimeout(() => {
                        document.body.removeChild(errorEl);
                    }, 300);
                }, 3000);
            }
            
            function handleMediaUpload(e) {
                const files = Array.from(e.target.files);
                files.forEach(file => {
                    if (file.type.startsWith('image/')) {
                        const reader = new FileReader();
                        reader.onload = event => {
                            appState.mediaFiles.push(event.target.result);
                            const img = document.createElement('img');
                            img.src = event.target.result;
                            img.className = 'preview-item';
                            dom.mediaPreview.appendChild(img);
                        };
                        reader.readAsDataURL(file);
                    }
                });
            }

            // --- AI SIMULATION ---
            function runGeneration() {
                // Simulate AI loading process
                const loadingMessages = [
                    "Analyzing script content...",
                    "Extracting key information...",
                    "Generating anchor narration...",
                    "Processing media assets...",
                    "Applying visual effects...",
                    "Rendering broadcast...",
                    "Finalizing output..."
                ];
                
                let msgIndex = 0;
                let progress = 0;
                
                dom.loadingText.textContent = loadingMessages[msgIndex];
                
                appState.generationInterval = setInterval(() => {
                    msgIndex++;
                    progress = Math.min(100, progress + 15);
                    dom.progressBar.style.width = `${progress}%`;
                    
                    if (msgIndex < loadingMessages.length) {
                        dom.loadingText.textContent = loadingMessages[msgIndex];
                    } else {
                        clearInterval(appState.generationInterval);
                        showFinalVideo();
                    }
                }, 1000);
            }

            function showFinalVideo() {
                setTimeout(() => {
                    dom.loadingContainer.style.display = 'none';
                    
                    // Populate the final video screen with user data
                    document.getElementById('final-anchor-img').src = appState.selectedAnchor.src;
                    document.getElementById('anchor-name-display').textContent = appState.selectedAnchor.name;
                    document.getElementById('report-title-display').textContent = generateHeadline(appState.script);
                    document.getElementById('ticker-text-display').textContent = generateTicker(appState.script);
                    
                    // Set initial background
                    if (appState.mediaFiles.length > 0) {
                        dom.finalVideoContainer.style.backgroundImage = `url('${appState.mediaFiles[0]}')`;
                    } else {
                        dom.finalVideoContainer.style.backgroundImage = 'url(https://images.unsplash.com/photo-1552664730-d307ca884978?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1200&q=80)';
                    }
                    
                    // AI B-roll simulation
                    if (appState.mediaFiles.length > 1) {
                        let brollIndex = 1;
                        appState.brollInterval = setInterval(() => {
                            brollIndex = (brollIndex + 1) % appState.mediaFiles.length;
                            dom.finalVideoContainer.style.backgroundImage = `url('${appState.mediaFiles[brollIndex]}')`;
                        }, 4000);
                    }
                    
                    dom.finalVideoContainer.style.display = 'block';
                }, 500);
            }

            // AI Text Analysis Simulation
            function generateHeadline(script) {
                const sentences = script.split('.');
                if (sentences.length > 0) {
                    const firstSentence = sentences[0].trim();
                    return firstSentence.length > 60 ? firstSentence.substring(0, 60) + '...' : firstSentence;
                }
                return script.substring(0, 60) + '...';
            }

            function generateTicker(script) {
                const words = script.toLowerCase().replace(/[.,'"()]/g, '').split(' ');
                const commonWords = new Set(['the', 'a', 'in', 'is', 'it', 'to', 'its', 'and', 'good', 'evening', 'today', 'that', 'with', 'for']);
                const keywords = [...new Set(words.filter(w => w.length > 4 && !commonWords.has(w)))];
                
                if (keywords.length < 3) {
                    return "GLOBALX NEWS HEADLINES: STAY UP TO DATE WITH THE LATEST BREAKING NEWS FROM AROUND THE WORLD...";
                }
                
                const headline = keywords.slice(0, 5).join(' • ').toUpperCase();
                return `BREAKING: ${headline} • LIVE FROM GLOBALX NEWS HEADQUARTERS • MORE DETAILS AT GLOBALX-NEWS.COM • `;
            }

            // --- START THE APP ---
            init();
        });
    </script>
</body>
</html>
